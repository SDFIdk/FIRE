

<!DOCTYPE html>
<html class="writer-html5" lang="dk" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FIREs Datamodel &mdash; FIRE 1.9.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=4ae1632d" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=e3fbf689"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Udviklingsguide" href="for_udviklere.html" />
    <link rel="prev" title="Installationsvejledning" href="installation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            FIRE
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="konfiguration.html">Konfigurationsfil</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installationsvejledning</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">FIREs Datamodel</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduktion">Introduktion</a></li>
<li class="toctree-l2"><a class="reference internal" href="#grundliggende-objekter">Grundliggende objekter</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#punktinformationer-og-punktinformationstyper">Punktinformationer og Punktinformationstyper</a></li>
<li class="toctree-l3"><a class="reference internal" href="#koordinater-og-koordinatsystemer">Koordinater og koordinatsystemer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#observationer-og-observationstyper">Observationer og observationstyper</a></li>
<li class="toctree-l3"><a class="reference internal" href="#geometriobjekt">Geometriobjekt</a></li>
<li class="toctree-l3"><a class="reference internal" href="#grafik">Grafik</a></li>
<li class="toctree-l3"><a class="reference internal" href="#beregninger">Beregninger</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#tidsserier-og-punktsamlinger">Tidsserier og PunktSamlinger</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sager-og-historik">Sager og historik</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#eksempel-pa-en-sag">Eksempel på en sag</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="for_udviklere.html">Udviklingsguide</a></li>
<li class="toctree-l1"><a class="reference internal" href="apps/index.html">Kommandolinjeprogrammer</a></li>
<li class="toctree-l1"><a class="reference internal" href="tips/index.html">Tips og tricks</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/modules.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="workshop/index.html">Workshop</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">FIRE</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">FIREs Datamodel</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/datamodel.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="fires-datamodel">
<span id="datamodel"></span><h1>FIREs Datamodel<a class="headerlink" href="#fires-datamodel" title="Link to this heading"></a></h1>
<section id="introduktion">
<h2>Introduktion<a class="headerlink" href="#introduktion" title="Link to this heading"></a></h2>
<p>Datamodellen i FIRE består af to lag: Et datalag og et metadatalag. Datalaget
indeholder de egentlige geodætisk relevante data, og metadatalaget indeholder
historikken af disse data. Tilsammen består de to lag af en række objekter
som har indbyrdes relationer. Et objekt i denne sammenhæng kan løseligt forstås
som en række i en relationel database.</p>
<p>Datamodellen er udviklet efter princippet om at det skal være muligt at genskabe
indholdet i databasen som det så ud på en vilkårlig dag tilbage i tiden. Dette
følger god forvaltningsskik i staten, samt understøtter inkrementelle opdateringer
af en tilknyttet udstillingsmodel.</p>
<p>For at kunne bestemme indholdet af databasen på et givent tidspunkt er det
en forudsætning at intet data slettes. Hvis data først er landet i databasen,
må det altså ikke forsvinde igen. Dette gælder også for fejlbehæftede data.
Det forhindrer dog ikke at fejl rettes, det betyder bare at istedet for at
fjerne data, erstattes det af nyt så man kan følge udviklingen over tid.
Til dette bruges &quot;Fikspunktregisterobjekter&quot;. Alle de geodætiske data i FIRE
er Fikspunktsregisterobjekter, fx Punkter, Koordinater og Observationer (markeret
med blåt i figurerne herunder). At et objekt er et Fikspunktsregisterobjekt
betyder at det har fire attributter tilknyttet sig: <code class="docutils literal notranslate"><span class="pre">registreringfra</span></code>,
<code class="docutils literal notranslate"><span class="pre">registreringtil</span></code>, <code class="docutils literal notranslate"><span class="pre">sagseventidfra</span></code> og <code class="docutils literal notranslate"><span class="pre">sagseventidtil</span></code>. Tilsammen giver
disse fire attributter muligheden for at holde styr på historikken i databasen.</p>
<figure class="align-center" id="fikspunktregisterobjekt">
<div class="graphviz"><img src="_images/graphviz-7815da4ea0b2022df05a95b0a4eb11a682b8406a.png" alt="digraph &quot;Fikspunktregisterobjekt&quot; {
        node [shape=record, fontname=&quot;Verdana&quot;, fontsize=&quot;12&quot;];
        graph [splines=ortho];

        Fikspunktregisterobjekt [
            fillcolor = lightskyblue
            style = filled
            label = &quot;{Fikspunktregisterobjekt|\l
                    + registreringfra : Datetime\l
                    + registreringtil : Datetime\l
                    + sagseventidfra : UUID\l
                    + sagseventidtil : UUID\l
            }&quot;
        ]
    }" class="graphviz" /></div>
<figcaption>
<p><span class="caption-text">Fikspunktregisterobjektet - det grundliggende object i FIRE</span><a class="headerlink" href="#fikspunktregisterobjekt" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>I praksis holdes der styr på data ved at registrere hvornår det er indsat i
databasen (<code class="docutils literal notranslate"><span class="pre">registreringfra</span></code>). Når et objekt, fx en koordinat, erstattes af
en nyere, angives det på det tidligere objekt hvornår det er blevet erstattet
(<code class="docutils literal notranslate"><span class="pre">registreringtil</span></code>). Tilsvarende, hvis et objekt skal &quot;slettes&quot; sættes
<code class="docutils literal notranslate"><span class="pre">registreringtil</span></code> til det tidspunkt hvor det er besluttet, at objektet
ikke længere er i brug. Den slags ændringer i objekter kaldes hændelser. En
gruppe af logisk sammenhængende hændelser udgør en Sag.</p>
<p>I databasen er hændelserne navngivet &quot;Sagsevents&quot; (og ikke &quot;Sagshændelser&quot;, da danske tegn fungerer dårligt i
databasen). Ved hver hændelse indsættes der et Sagsevent i databasen.
Disse kan identificeres ved ID'er. Det er disse ID'er Fikspunktsregisterobjekter
benytter i attributterne <code class="docutils literal notranslate"><span class="pre">sagseventidfra</span></code> og <code class="docutils literal notranslate"><span class="pre">sagseventidtil</span></code>. Det vil sige
at hver gang et objekt registreres eller ændres i databasen, er der tilknyttet
metadata til hændelsen. Håndtering af Sager og Sagsevents beskrives yderligere i
afsnittet <a class="reference internal" href="#sager-og-historik"><span class="std std-ref">Sager og historik</span></a>.</p>
</section>
<section id="grundliggende-objekter">
<h2>Grundliggende objekter<a class="headerlink" href="#grundliggende-objekter" title="Link to this heading"></a></h2>
<p>Alt i FIRE er bygget op omkring Punkter. Punktet er det mest simple objekt
i FIRE, da dets primære funktion er at være bindeled til andre objekter og derfor
i praksis kun består af en nøgle andre objekter kan henvise til. Der findes fem objekter
der direkte kan knyttes til et punkt: Koordinat, Observation, Punktinformation,
Geometriobjekt og Grafik. De indbyrdes forhold ses på figuren herunder og omtales yderligere
i separate afsnit længere nede i teksten.</p>
<figure class="align-center" id="grundobjekter">
<div class="graphviz"><img src="_images/graphviz-81842fd860f007cff99f60c508122b7e0c9e5359.png" alt="digraph &quot;Grundobjekter&quot; {
     node [shape=record, fontname=&quot;Verdana&quot;, fontsize=&quot;12&quot;];
     graph [splines=ortho];


    Punkt [
        label = &quot;{Punkt|\l
                + objektid : Integer\l
                + id : UUID\l
        }&quot;
        fillcolor = lightskyblue
        style = filled
    ]

    Geometriobjekt [
        label = &quot;{Geometriobjekt|\l
                + objektid : Integer\l
                + punktid : UUID\l
                + geometri : Geometry\l
        }&quot;
        fillcolor = lightskyblue
        style = filled
    ]

    Punktinformation [
        label = &quot;{Punktinformation|\l
                + objektid : Integer\l
                + punktid : UUID\l
                + infotypeid : Integer\l
                + tal : Boolean\l
                + tekst : String\l
        }&quot;
        fillcolor = lightskyblue
        style = filled
    ]

    Koordinat [
        label = &quot;{Koordinat|\l
                + objektid : Integer\l
                + punktid : UUID\l
                + sridid : Integer\l
                + t : Datetime\l
                + x : Float\l
                + y : Float\l
                + z : Float\l
                + sx : Float\l
                + sy : Float\l
                + sz : Float\l
                + transformeret : Boolean\l
                + artskode : Integer\l
                + fejlmeldt : Boolean\l

        }&quot;
        fillcolor = lightskyblue
        style = filled
    ]

    Observation [
        label = &quot;{Observation|\l
                + objektid : Integer\l
                + id : UUID\l
                + observationstypeid : Integer\l
                + antal : Integer\l
                + gruppe : Integer\l
                + observationstidspunkt : Datetime\l
                + opstillingspunktid : UUID\l
                + sigtepunktsid : UUID\l
                + value1 : Float\l
                + value2 : Float\l
                ...\l
                + value15 : Float\l
                + fejlmeldt : Boolean\l
        }&quot;
        fillcolor = lightskyblue
        style = filled
    ]

    Grafik [
        label = &quot;{Grafik|\l
                + objektid : Integer\l
                + punktid : UUID\l
                + grafik : BLOB\l
                + type : String\l
                + mimetype : String\l
                + filnavn : String\l
        }&quot;
        fillcolor = lightskyblue
        style = filled
    ]

    Geometriobjekt -&gt; Punkt [constraint=false];
    Punktinformation -&gt; Punkt [constraint=false];
    Koordinat -&gt; Punkt [constraint=false];
    Observation -&gt; Punkt [constraint=true];
    Grafik -&gt; Punkt [constraint=true];

 }" class="graphviz" /></div>
<figcaption>
<p><span class="caption-text">Grundliggende dataobjekter i FIRE</span><a class="headerlink" href="#grundobjekter" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>Da der kan være mange forskellige typer Koordinater, Observationer
og Punktinformationer, findes der for hver af de tre objekter typer
som bruges til at bestemme hvilke egenskaber et givent objekt har.
På figuren herunder ses skematisk hvordan typerne for hver af de
tre objekter er bygget op.</p>
<figure class="align-center" id="typer">
<div class="graphviz"><img src="_images/graphviz-d66f94ee0972ec7936dae6b26122fe04e10a48b4.png" alt="digraph &quot;Typer&quot; {
        node [shape=record, fontname=&quot;Verdana&quot;, fontsize=&quot;12&quot;];
        graph [splines=ortho];

        Observationstype [
            fillcolor = palegreen
            style = filled
            label = &quot;{Observationstype|\l
                    + objektid : Integer\l
                    + id : Integer\l
                    + observationstype: String\l
                    + beskrivelse: String\l
                    + sigtepunkt: Boolean\l
                    + value1 : String\l
                    + value2 : String\l
                    ...\l
                    + value15 : String\l
            }&quot;
        ]

        SRIDType [
            fillcolor = palegreen
            style = filled
            label = &quot;{SRIDType|\l
                    + objektid : Integer\l
                    + id : Integer\l
                    + SRID: String\l
                    + kortnavn: String\l
                    + beskrivelse: String\l
                    + x : String\l
                    + y : String\l
                    + z : String\l
            }&quot;
        ]

        Punktinfotype [
            fillcolor = palegreen
            style = filled
            label = &quot;{Punktinfotype|\l
                    + objektid : Integer\l
                    + id : Integer\l
                    + infotype: String\l
                    + beskrivelse: String\l
                    + anvendelse : String\l
            }&quot;
        ]

        Punktinformation [
            fillcolor = lightskyblue
            style = filled
        ]

        Koordinat [
            fillcolor = lightskyblue
            style = filled
        ]

        Observation [
            fillcolor = lightskyblue
            style = filled
        ]

        Punkt [
            fillcolor = lightskyblue
            style = filled
        ]

            Punktinfotype -&gt; Punktinformation;
            SRIDType -&gt; Koordinat;
            Observationstype -&gt; Observation;

            Punktinformation -&gt; Punkt;
            Koordinat -&gt; Punkt;
            Observation -&gt; Punkt;
    }" class="graphviz" /></div>
<figcaption>
<p><span class="caption-text">Typer</span><a class="headerlink" href="#typer" title="Link to this image"></a></p>
</figcaption>
</figure>
<section id="punktinformationer-og-punktinformationstyper">
<h3>Punktinformationer og Punktinformationstyper<a class="headerlink" href="#punktinformationer-og-punktinformationstyper" title="Link to this heading"></a></h3>
<p>Punktinformationer er, som navnet antyder, information om et punkt. Punktinformation
dækker over mange aspekter af et punkter: Identer, afmærkningstyper, attributter,
skitser, geografisk område og så videre. Hver af disse aspekter er registreret som
en separat Punktinformationstype, der identificeres ud fra en nøgle på formen:
&lt;kategori&gt;:&lt;attribut&gt;. Eksempler på Punktinformationstyper er <em>IDENT:landsnr</em>, <em>NET:10KM</em> og
<em>AFM:højde_over_terræn</em>.</p>
<p>Tabellen herunder viser hvilke punktinformationskategorier der findes.</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><strong>Kategori</strong></p></td>
<td><p><strong>Beskrivelse</strong></p></td>
</tr>
<tr class="row-even"><td><p>AFM</p></td>
<td><p>Afmærkningstyper</p></td>
</tr>
<tr class="row-odd"><td><p>ATTR</p></td>
<td><p>Attributter</p></td>
</tr>
<tr class="row-even"><td><p>IDENT</p></td>
<td><p>Identer</p></td>
</tr>
<tr class="row-odd"><td><p>NET</p></td>
<td><p>Netforhold</p></td>
</tr>
<tr class="row-even"><td><p>REGION</p></td>
<td><p>Geografisk region</p></td>
</tr>
<tr class="row-odd"><td><p>SKITSE</p></td>
<td><p>Information vedr. punktskitser</p></td>
</tr>
</tbody>
</table>
<p>Overordnet set kan Punktinformationer bruges på tre måder: Tekst, tal og markering.
Eksempler på tekst er <em>IDENT:GNSS</em>, <em>ATTR:bemærkning</em> og <em>SKITSE:sti</em>. Punktinformationer
der indeholder tal er <em>AFM:højde_over_dæksel</em> og <em>AFM:højde_over_jordoverfladen</em>.
Markeringer er &quot;enten/eller&quot;-attributter. Hvis en markering er angivet, er attributten aktuel
for det givne punkt. Eksempler herpå er <em>ATTR:tabtgået</em>, <em>NET:5D</em> og <em>REGION:DK</em>.</p>
<p>Mere information om en bestemt Punktinformationstype kan fås ved hjælp af kommandoen:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fire</span> <span class="n">info</span> <span class="n">infotype</span> <span class="o">&lt;</span><span class="n">punktinfotype</span><span class="o">&gt;</span>
</pre></div>
</div>
</section>
<section id="koordinater-og-koordinatsystemer">
<h3>Koordinater og koordinatsystemer<a class="headerlink" href="#koordinater-og-koordinatsystemer" title="Link to this heading"></a></h3>
<p>Koordinater og koordinatsystemer går hånd i hånd. Derfor har enhver koordinat
i FIRE et koordinatsystem, eller en SRID <a class="footnote-reference brackets" href="#f1" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>, tilknyttet sig. Det er SRID'en
der definerer hvilke dimensioner en given koordinat har. Fx en DVR90-kote der kun
består af et enkelt koordinatelement vinkelret på geoiden. En SRID kan være både
et-, to- eller tre-dimensionel. Dertil kommer at <em>alle</em> Koordinater i FIRE også har
en tidslig dimension. Tidspunktet for Koordinatens skabelses registreres altid
sammen med koordinaten i feltet <code class="docutils literal notranslate"><span class="pre">t</span></code>. Afhængig af formålet vil <code class="docutils literal notranslate"><span class="pre">t</span></code> være angivet
enten til beregningstidspunktet eller opmålingstidspunktet.</p>
<p>Der kan knyttes mange Koordinater til et Punkt, men for hvert koordinatsytem
kan der kun være en gældende koordinat per punkt. Når en ny Koordinat tilføjes et
Punkt afregistreres dens forgænger automatisk.</p>
<p>Ligesom Punktinformationstyperne er SRID'er opdelt efter kategori. Som udgangspunkt
benyttes EPSG-koder for de systemer der er registreret i EPSG-databasen. De resterende
er navngivet efter region eller særligt formål. Se en oversigt over kategorierne i
tabellen herunder.</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><strong>Kategori</strong></p></td>
<td><p><strong>Beskrivelse</strong></p></td>
</tr>
<tr class="row-even"><td><p>EPSG</p></td>
<td><p>Koordinatsystemer registreret i EPSG-databasen</p></td>
</tr>
<tr class="row-odd"><td><p>DK</p></td>
<td><p>Danske koordinatsystemer</p></td>
</tr>
<tr class="row-even"><td><p>GL</p></td>
<td><p>Grønlandske koordinatsystemer</p></td>
</tr>
<tr class="row-odd"><td><p>TS</p></td>
<td><p>Lokale tidsseriekoordinatsystemer, fx på
Jessen-punkter</p></td>
</tr>
</tbody>
</table>
<p>Mere information om et bestemt koordinatsystem kan fås ved hjælp af kommandoen:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fire</span> <span class="n">info</span> <span class="n">srid</span> <span class="o">&lt;</span><span class="n">SRID</span><span class="o">&gt;</span>
</pre></div>
</div>
</section>
<section id="observationer-og-observationstyper">
<h3>Observationer og observationstyper<a class="headerlink" href="#observationer-og-observationstyper" title="Link to this heading"></a></h3>
<p>Ligesom for Punktinformation og Koordinater defineres forskellige typer af Observationer.
Der kan knyttes op til 15 værdier til en Observation; præcist hvor mange og deres betydning
defineres i Observationstypen. Der findes væsentligt færre observationstyper end der findes
SRID'er og Punktinformationstyper hvorfor de ikke organiseres under forskellige kategorier.
De tilgængelige Observationstyper vises i tabellen herunder.</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><strong>Type</strong></p></td>
<td><p><strong>Beskrivelse</strong></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">geometrisk_koteforskel</span></code></p></td>
<td><p>Koteforskel fra fikspunkt1 til fikspunkt2 (h2-h1) opmålt geometrisk</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">trigonometrisk_koteforskel</span></code></p></td>
<td><p>Koteforskel fra fikspunkt1 til fikspunkt2 (h2-h1) opmålt trigonometrisk</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">retning</span></code></p></td>
<td><p>Horisontal retning med uret fra opstilling til sigtepunkt (reduceret
til ellipsoiden)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">horisontalafstand</span></code></p></td>
<td><p>Horisontal afstand mellem opstilling og sigtepunkt (reduceret til
ellipsoiden)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">skråafstand</span></code></p></td>
<td><p>Skråafstand mellem opstilling og sigtepunkt</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">zenitvinkel</span></code></p></td>
<td><p>Zenitvinkel mellem opstilling og sigtepunkt</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">vektor</span></code></p></td>
<td><p>Vektor der beskriver koordinatforskellen fra punkt 1 til punkt 2 (v2-v1)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">absolut_tyngde</span></code></p></td>
<td><p>Absolut gravimetrisk observation</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">nulobservation</span></code></p></td>
<td><p>Observation nummer nul, indlagt fra start i observationstabellen,
så der kan refereres til den i de mange beregningsevents der fører til
population af koordinattabellen</p></td>
</tr>
</tbody>
</table>
<p>Observationer foretages i de fleste tilfælde mellem to punkter: Et opstillingspunkt og et
sigtepunkt. Observationstypen afgør om der er behov for både et opstillingspunkt og et
sigtepunkt eller om der kun er brug for et opstillingspunkt. Der kan knyttes mange Observationer
til et Punkt eller et sæt af Punkter.</p>
<p>Mere information om en bestemt observationstype kan fås ved hjælp af kommandoen:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fire</span> <span class="n">info</span> <span class="n">obstype</span> <span class="o">&lt;</span><span class="nb">type</span><span class="o">&gt;</span>
</pre></div>
</div>
</section>
<section id="geometriobjekt">
<h3>Geometriobjekt<a class="headerlink" href="#geometriobjekt" title="Link to this heading"></a></h3>
<p>Et Geometriobjekt indeholder et Punkts omtrentlige placering i form af en GIS-læsbar
punktgeometri. Et Punkt kan kun have ét aktivt Geometriobjekt knyttet til sig ad
gangen. Geometriobjekter bruges fx i forbindelse med udstilling af fikspunkter i
Valdemar. Koordinater i Geometriobjekter er angivet som WGS84-koordinater, da det
er det mest gængse koordinatsystem i diverse GIS-applikationer, især webapplikationer
som Valdemar.</p>
<p>Et Punkts Geometriobjekt kan ses i form af en WKT-geometri ved at kalde:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fire</span> <span class="n">info</span> <span class="n">punkt</span> <span class="o">&lt;</span><span class="n">ident</span><span class="o">&gt;</span>
</pre></div>
</div>
</section>
<section id="grafik">
<h3>Grafik<a class="headerlink" href="#grafik" title="Link to this heading"></a></h3>
<p>Et Grafik objekt bruges til at registrere fikspunktsskitser og fotos af relevans
for et givent fikspunkt eller geodætisk station. Et Grafik objekt er karakteriseret
ved en billedefil i enten PNG eller JPEG, hvilket eksplicit registreres i felterne
<code class="docutils literal notranslate"><span class="pre">grafik</span></code>, <code class="docutils literal notranslate"><span class="pre">mimetype</span></code> og <code class="docutils literal notranslate"><span class="pre">filnavn</span></code>. <code class="docutils literal notranslate"><span class="pre">grafik</span></code> indeholder selve det binære data
der udgør billedefilen, <code class="docutils literal notranslate"><span class="pre">mimetype</span></code> og <code class="docutils literal notranslate"><span class="pre">filnavn</span></code> holder rede på filens type og navn.</p>
<p>Herudover er grafikkens type også registreret i et felt i tabellen. Der skælnes mellem
to typer: skitse og foto.</p>
<p>Det gælder for grafikobjekterne at filnavnet er unikt, så det er ikke muligt at lægge
to billeder ind med samme navn. Dette princip er indført for at gøre det simplere at
eksportere fikspunktskitser til fx Valdemar.</p>
</section>
<section id="beregninger">
<h3>Beregninger<a class="headerlink" href="#beregninger" title="Link to this heading"></a></h3>
<p>I FIRE kobles koordinater til Observationer ved hjælp af Beregninger. Herunder
ses skematisk hvordan forholdet mellem de tre objekter er. Bemærk de to
krydsreferencetabeller <code class="docutils literal notranslate"><span class="pre">Beregning_koordinat</span></code> og <code class="docutils literal notranslate"><span class="pre">Beregning_observation</span></code>, der
gør det muligt at tilknytte et vilkårligt antal Koordinater til et vilkårligt
antal Observationer. Ved hjælp af Beregninger er det altså muligt at bestemme
præcist hvilke observationer der ligger til grund for en bestemt Koordinat.</p>
<figure class="align-center" id="beregning">
<div class="graphviz"><img src="_images/graphviz-0cbe428d4df279bdff9c90d0907447c4f69e32d6.png" alt="digraph &quot;Punktinformationer&quot; {
        node [shape=record, fontname=&quot;Verdana&quot;, fontsize=&quot;12&quot;];
        graph [splines=ortho];

        Beregning [
            fillcolor = lightskyblue
            style = filled
            label = &quot;{Beregning|\l
                    + objektid : Integer\l
            }&quot;
        ]

        Beregning_koordinat [
            fillcolor = yellow
            style = filled
            label = &quot;{Beregning_koordinat|\l
                    + beregningobjektid : Integer\l
                    + koordinatobjektid : Integer\l
            }&quot;
        ]

        Beregning_observation [
            fillcolor = yellow
            style = filled
            label = &quot;{Beregning_observation|\l
                    + beregningobjektid : Integer\l
                    + observationobjektid : Integer\l
            }&quot;
        ]

        Koordinat [
            fillcolor = lightskyblue
            style = filled
            label = &quot;{Koordinat|\l
                    + objektid : Integer\l
            }&quot;
        ]

        Observation [
            fillcolor = lightskyblue
            style = filled
            label = &quot;{Observation|\l
                + objektid : Integer\l

            }&quot;
        ]

        Beregning -&gt; Beregning_observation -&gt; Observation:n;
        Beregning -&gt; Beregning_koordinat -&gt; Koordinat:n;

    }" class="graphviz" /></div>
<figcaption>
<p><span class="caption-text">Beregninger</span><a class="headerlink" href="#beregning" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
</section>
<section id="tidsserier-og-punktsamlinger">
<span id="id2"></span><h2>Tidsserier og PunktSamlinger<a class="headerlink" href="#tidsserier-og-punktsamlinger" title="Link to this heading"></a></h2>
<p>Til understøttelse af tidsserieanalyser findes der i FIRE objekterne Tidsserie
og PunktSamling. En tidsserie kan stå alene eller flere tidsserier kan grupperes
ved hjælp af en PunktSamling. Funktionaliteten af de to objekter forklares nemmest
med afsæt i to forskellige slags tidsserieanalyser: GNSS og Nivellement. En GNSS-
tidsserie er relativt simpel, da den udelukkende består af en række koordinater knyttet
til samme Punkt. Nivellementstidsserien derimod vil involvere flere punkter, hvoraf et
er udpeget som Jessenpunkt hvis stabilitet analyseres. Det vil sige at vi for hvert
punkt i PunktSamlingen har en Tidsserie bestående af koter relative til Jessenpunktet.
Herunder ses sammenhængene mellem tabellerne der ligger til grund for Tidsserie- og
Punktsamlingobjekterne.</p>
<figure class="align-center" id="tidsserie">
<div class="graphviz"><img src="_images/graphviz-2fd499168320e9ec94925ba5ae68116eb3bae6a4.png" alt="digraph &quot;Tidsserier&quot; {
        node [shape=record, fontname=&quot;Verdana&quot;, fontsize=&quot;12&quot;];
        graph [splines=ortho];

        Tidsserie [
            fillcolor = lightskyblue
            style = filled
            label = &quot;{Tidsserie|\l
                    + objektid : Integer\l
                    + punktid : UUID\l
                    + punktsamlingsid : Integer\l
                    + navn : String\l
                    + formaal : String\l
                    + sridid : Integer
            }&quot;
        ]

        Tidsserie_koordinat [
            fillcolor = yellow
            style = filled
            label = &quot;{Tidsserie_koordinat|\l
                    + tidsserieobjektid : Integer\l
                    + koordinatobjektid : Integer\l
            }&quot;
        ]

        Koordinat [
            fillcolor = lightskyblue
            style = filled
            label = &quot;{Koordinat|\l
                    + objektid : Integer\l
            }&quot;
        ]

        PunktSamling [
            fillcolor = lightskyblue
            style = filled
            label = &quot;{PunktSamling|\l
                + objektid : Integer\l
                + jessenpunktid : UUID\l
                + jessenkoordinatid : Integer\l
                + navn : String\l
                + formaal : String\l

            }&quot;
        ]

        Punkt [
            fillcolor = lightskyblue
            style = filled
            label = &quot;{Punkt|\l
                + id : UUID\l

            }&quot;
        ]

        Punktsamling_punkt [
            fillcolor = yellow
            style = filled
            label = &quot;{Punktsamling_punkt|\l
                    + punktsamlingobjektid : Integer\l
                    + punktid : UUID\l
            }&quot;
        ]

        Tidsserie -&gt; Tidsserie_koordinat;
        Tidsserie_koordinat -&gt; Koordinat;
        PunktSamling -&gt; Punktsamling_punkt -&gt; Punkt:n;
        PunktSamling -&gt; Punkt
        PunktSamling -&gt; Koordinat
        Tidsserie -&gt; PunktSamling [taillabel = &quot;0..1&quot;]

    }" class="graphviz" /></div>
<figcaption>
<p><span class="caption-text">Tidsserier og PunktSamlinger</span><a class="headerlink" href="#tidsserie" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="sager-og-historik">
<span id="id3"></span><h2>Sager og historik<a class="headerlink" href="#sager-og-historik" title="Link to this heading"></a></h2>
<p>I FIRE findes der to overordnede objekter der bruges til at håndtere historik
i databasen: Sager og Sagsevents. En Sag bruges til at gruppere beslægtede
indsættelser i databasen. Typisk vil en Sag følge en opmålingskampagne fra
opmåling til beregning af koordinater, en sådan kampagne kunne fx bestå af en
række hændelser: Oprettelse af nye fikspunkter, opdatering af skitser, opmåling,
og beregning. Hver af disse hændelser afføder indsættelse af nye data i databasen.
Disse hændelser kaldes i FIRE-terminologi Sagsevents.</p>
<p>En Sag er, ligesom et Punkt, et meget simpelt objekt hvis primære funktion er at
knytte andre objekter sammen. For Sagens vedkommende er det Sagsevents der knyttes
sammen.</p>
<p>Som det kan ses på figuren herunder, findes der &quot;info&quot;-objekter til både Sager og
Sagsevents. Disse gør det muligt at ændre på status af en Sag og lave ændringer i
den tilknyttede beskrivelse på en måde hvor kravet om ikke at slette indformation
fra databasen overholdes. For Sagsevents giver det også muligheden for at tilknytte
materiale til Sagen. Et eksempel her på kunne være en beregningsrapport i forbindelse
med indsættelse af nye koordinater. Eller et notat der forklarer hvorfor et punkt
er nedlagt.</p>
<figure class="align-center" id="sager">
<div class="graphviz"><img src="_images/graphviz-3a59477f2430df55821b2bc81be310e2032044ab.png" alt="digraph &quot;Sager&quot; {
        node [shape=record, fontname=&quot;Verdana&quot;, fontsize=&quot;12&quot;];
        graph [splines=ortho];

        Fikspunktregisterobjekt [
            fillcolor = lightskyblue
            style = filled
        ]

        Sag [
            fillcolor = salmon
            style = filled
            label = &quot;{Sag|\l
                    + objektid : Integer\l
                    + id : UUID\l
                    + registreringfra : Datetime\l
            }&quot;
        ]

        Sagsinfo [
            fillcolor = lightpink
            style = filled
            label = &quot;{Sagsinfo|\l
                    + objektid : Integer\l
                    + sagsid : UUID\l
                    + aktiv : Boolean\l
                    + registreringfra : Datetime\l
                    + registreringtil : Datetime\l
                    + journalnummer : String\l
                    + behandler : String\l
                    + beskrivelse : String\l
            }&quot;
        ]

        Sagsevent [
            fillcolor = salmon
            style = filled
            label = &quot;{Sagsevent|\l
                    + objektid : Integer\l
                    + id : UUID\l
                    + sagsid : UUID\l
                    + registreringfra : Datetime\l
                    + eventtypeid : Integer\l

            }&quot;
        ]

        Sagseventinfo [
            fillcolor = lightpink
            style = filled
            label = &quot;{Sagseventinfo|\l
                    + objektid : Integer\l
                    + sagseventid : UUID\l
                    + registreringfra : Datetime\l
                    + registreringtil : Datetime\l
                    + beskrivelse : String\l
            }&quot;
        ]

        Sagseventinfo_html [
            fillcolor = lightpink
            style = filled
            label = &quot;{Sagseventinfo_html|\l
                    + objektid : Integer\l
                    + html : String\l
                    + sagseventinfoid : Integer\l
            }&quot;
        ]

        Sagseventinfo_materiale [
            fillcolor = lightpink
            style = filled
            label = &quot;{Sagseventinfo_materiale|\l
                    + objektid : Integer\l
                    + sti : String\l
                    + md5sum : String\l
                    + sagseventinfoid : Integer\l
            }&quot;
        ]

        Eventtype [
            fillcolor = palegreen
            style = filled
            label = &quot;{Eventtype|\l
                    + objektid : Integer\l
                    + beskrivelse : String\l
                    + event : String\l
                    + eventtypeid : Integer\l
            }&quot;
        ]

        Sagsevent -&gt; Sag;
        Sagsevent -&gt; Fikspunktregisterobjekt;
        Sagsinfo -&gt; Sag;
        Sagseventinfo -&gt; Sagsevent;
        Sagseventinfo_html -&gt; Sagseventinfo;
        Sagseventinfo_materiale -&gt; Sagseventinfo;
        Eventtype -&gt; Sagsevent;
    }" class="graphviz" /></div>
<figcaption>
<p><span class="caption-text">Sagsobjekter i FIRE</span><a class="headerlink" href="#sager" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>Der findes en række sagsevents i FIRE. I tabellen herunder er de alle kort beskrevet.</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><strong>Type</strong></p></td>
<td><p><strong>Beskrivelse</strong></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">koordinat_beregnet</span></code></p></td>
<td><p>Bruges når koordinater indsættes efter en beregning. Vil typisk resulterere
i indsættelse af <em>n</em> koordinater og 1 beregning</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">koordinat_nedlagt</span></code></p></td>
<td><p>Bruges når en koordinat nedlægges</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">observation_indsat</span></code></p></td>
<td><p>Indsættelse af en eller flere observationer</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">observation_nedlagt</span></code></p></td>
<td><p>Bruges når en observation aflyses, fordi den er fejlbehæftet</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">punktinfo_tilføjet</span></code></p></td>
<td><p>Bruges når der tilføjes Punktinfo til et eller flere punkter</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">punktinfo_fjernet</span></code></p></td>
<td><p>Bruges når Punktinfo fjernes fra et eller flere punkter</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">punkt_oprettet</span></code></p></td>
<td><p>Bruges når et punkt og tilhørende geometri oprettes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">punkt_nedlagt</span></code></p></td>
<td><p>Bruges når et punkt og tilhørende geometri nedlægges. Bemærk at når et punkt
nedlægges, afregistreres desuden alle tilknyttede koordinater, observationer
og punktinformationer, da disse ikke længere har et tilhørsforhold</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">kommentar</span></code></p></td>
<td><p>Bruges til at tilføje fritekst-kommentarer til sagen i tilfælde af at der er
behov for at påhæfte sagen yderligere information, som ikke passer i andre
hændelser. Bruges fx også til påhæftning af materiale på sagen</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">grafik_indsat</span></code></p></td>
<td><p>Bruges når en grafik indsættes eller opdateres i databasen</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">grafik_nedlagt</span></code></p></td>
<td><p>Bruges når en grafik nedlægges</p></td>
</tr>
</tbody>
</table>
<section id="eksempel-pa-en-sag">
<h3>Eksempel på en sag<a class="headerlink" href="#eksempel-pa-en-sag" title="Link to this heading"></a></h3>
<p>Hvis man ser på en hel sag for fx en simpel kommunal vedligeholdsopgave, så vil det gå nogenlunde sådan
her i databasen:</p>
<ul class="simple">
<li><p>Opret Sag (+ Sagsinfo)</p></li>
<li><p>Opret Sagsevent af typen <code class="docutils literal notranslate"><span class="pre">punkt_oprettet</span></code> (+ Sagseventinfo)</p></li>
<li><p>Indsæt Punkter og Geometriobjekter, henvis til Sagsevent fra linjen ovenfor</p></li>
<li><p>Opret Sagsevent af typen <code class="docutils literal notranslate"><span class="pre">punktinfo_tilføjet</span></code> (+Sagseventinfo)</p></li>
<li><p>Indsæt Punktinformationer (fx <code class="docutils literal notranslate"><span class="pre">ATTR:tabtgået</span></code>), henvis til Sagsevent fra linjen ovenfor</p></li>
<li><p>Opret Sagsevent af typen <code class="docutils literal notranslate"><span class="pre">observation_indsat</span></code> (+ Sagseventinfo)</p></li>
<li><p>Indsæt Observationer, henvis til Sagsevent på linjen ovenfor</p></li>
<li><p>Opret Sagsevent af typen <code class="docutils literal notranslate"><span class="pre">koordinat_beregnet</span></code> (+ Sagseventinfo, beregningsrapport vedlægges).</p></li>
<li><p>Indsæt Koordinater og Beregning, henvis til Sagsevent på linjen ovenfor</p></li>
<li><p>Opdater aktiv-feltet til &quot;false&quot; på Sagens Sagsinfo.</p></li>
</ul>
<p>Der tilføjes beskrivelser af Sag og Sagsevent i forbindelse med at de oprettes. Beskrivelse for Sag kan fx lyde noget i stil med &quot;Kommunal vedligehold Vejle 2020&quot; og for Sagsevents fx &quot;Indsættelse af observationer&quot; og &quot;Indsættelse af koordinater&quot;. Tilsammen gør det det muligt at få et hurtigt overblik over hvad der er
sket på en Sag.</p>
<p>Ovenstående eksempel er meget databasenært. Brugere af FIRE skal ikke forholde sig aktivt til Sagsevent
i samme grad som beskrevet ovenfor.</p>
<p class="rubric">Footnotes</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="f1" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>Spatial Reference ID, eksempelvis EPSG:25832.</p>
</aside>
</aside>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="installation.html" class="btn btn-neutral float-left" title="Installationsvejledning" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="for_udviklere.html" class="btn btn-neutral float-right" title="Udviklingsguide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019-2025 SDFI, Septima.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>